ml_switcheroo.config
====================

.. py:module:: ml_switcheroo.config

.. autoapi-nested-parse::

   Runtime Configuration Store.
   Supports Dynamic Defaults, TOML loading, and Framework Flavours.

   This module resolves default Source and Target frameworks by querying the
   ``ui_priority`` of registered adapters, ensuring the logic is completely agnostic
   to the specific libraries installed.



Attributes
----------

.. autoapisummary::

   ml_switcheroo.config.tomllib
   ml_switcheroo.config.T


Classes
-------

.. autoapisummary::

   ml_switcheroo.config.RuntimeConfig


Functions
---------

.. autoapisummary::

   ml_switcheroo.config.get_framework_priority_order
   ml_switcheroo.config.parse_cli_key_values


Module Contents
---------------

.. py:data:: tomllib
   :value: None


.. py:data:: T

.. py:function:: get_framework_priority_order() -> List[str]

   Returns a list of framework keys sorted by UI Priority.

   The sort order is determined by the ``ui_priority`` attribute of the
   registered FrameworkAdapter. Lower numbers appear first (Source default).

   If no priority is defined, defaults to 999.

   :returns: Sorted list of framework identifiers (e.g. ['torch', 'jax']).
   :rtype: List[str]


.. py:class:: RuntimeConfig(/, **data: Any)

   Bases: :py:obj:`pydantic.BaseModel`


   Global configuration container for the translation engine.


   .. py:attribute:: source_framework
      :type:  str
      :value: None



   .. py:attribute:: target_framework
      :type:  str
      :value: None



   .. py:attribute:: source_flavour
      :type:  Optional[str]
      :value: None



   .. py:attribute:: target_flavour
      :type:  Optional[str]
      :value: None



   .. py:attribute:: strict_mode
      :type:  bool
      :value: None



   .. py:attribute:: intermediate
      :type:  Optional[str]
      :value: None



   .. py:attribute:: enable_graph_optimization
      :type:  bool
      :value: None



   .. py:attribute:: enable_import_fixer
      :type:  bool
      :value: None



   .. py:attribute:: enable_fusion
      :type:  bool
      :value: None



   .. py:attribute:: plugin_settings
      :type:  Dict[str, Any]
      :value: None



   .. py:attribute:: plugin_paths
      :type:  List[pathlib.Path]
      :value: None



   .. py:attribute:: validation_report
      :type:  Optional[pathlib.Path]
      :value: None



   .. py:method:: model_post_init(__context: Any) -> None

      Sync legacy fields.



   .. py:method:: validate_framework(v: str) -> str
      :classmethod:


      Ensures the framework is registered in the system.

      :param v: The framework key to validate.
      :type v: str

      :returns: The normalized framework key.
      :rtype: str

      :raises ValueError: If the framework is not registered and not a placeholder.



   .. py:property:: effective_source
      :type: str


      Returns the resolved source framework key.

      Prioritizes ``source_flavour`` if present, otherwise returns ``source_framework``.

      :returns: The active source framework key.
      :rtype: str


   .. py:property:: effective_target
      :type: str


      Returns the resolved target framework key.

      Prioritizes ``target_flavour`` if present, otherwise returns ``target_framework``.

      :returns: The active target framework key.
      :rtype: str


   .. py:method:: parse_plugin_settings(schema: Type[T]) -> T

      Validates plugin settings against a Pydantic model.

      :param schema: The Pydantic model class defining the settings schema.
      :type schema: Type[T]

      :returns: An instance of the schema populated with validated settings.
      :rtype: T

      :raises ValueError: If validation against the schema fails.



   .. py:method:: load(source: Optional[str] = None, target: Optional[str] = None, source_flavour: Optional[str] = None, target_flavour: Optional[str] = None, strict_mode: Optional[bool] = None, intermediate: Optional[str] = None, enable_fusion: Optional[bool] = None, plugin_settings: Optional[Dict[str, Any]] = None, validation_report: Optional[pathlib.Path] = None, search_path: Optional[pathlib.Path] = None) -> RuntimeConfig
      :classmethod:


      Loads configuration from ``pyproject.toml``, overriding with CLI arguments.
      Defaults are calculated dynamically via factory methods if not found.

      :param source: Override source framework.
      :type source: Optional[str]
      :param target: Override target framework.
      :type target: Optional[str]
      :param source_flavour: Override source flavour.
      :type source_flavour: Optional[str]
      :param target_flavour: Override target flavour.
      :type target_flavour: Optional[str]
      :param strict_mode: Override strict mode setting.
      :type strict_mode: Optional[bool]
      :param intermediate: Override intermediate representation mode.
      :type intermediate: Optional[str]
      :param enable_fusion: Override fusion/optimization setting (Maps to enable_graph_optimization).
      :type enable_fusion: Optional[bool]
      :param plugin_settings: Additional plugin settings.
      :type plugin_settings: Optional[Dict]
      :param validation_report: Override validation report path.
      :type validation_report: Optional[Path]
      :param search_path: Directory path to search for config file.
      :type search_path: Optional[Path]

      :returns: The fully resolved configuration object.
      :rtype: RuntimeConfig



.. py:function:: parse_cli_key_values(items: Optional[List[str]]) -> Dict[str, Any]

   Parses a list of 'key=value' strings into a dictionary with type inference.

   :param items: List of strings in "key=value" format.
   :type items: Optional[List[str]]

   :returns: Dictionary with parsed values (bool, int, float, or str).
   :rtype: Dict[str, Any]


