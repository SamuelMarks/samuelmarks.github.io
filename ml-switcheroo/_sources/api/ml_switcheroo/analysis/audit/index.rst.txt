ml_switcheroo.analysis.audit
============================

.. py:module:: ml_switcheroo.analysis.audit

.. autoapi-nested-parse::

   Audit functionality to determine coverage gaps for a source codebase.

   This module provides the :class:`CoverageScanner`, a static analysis visitor
   that inspects source code to identify API usage (calls and attributes) relative
   to specific frameworks (e.g., PyTorch, JAX). It resolves import aliases to
   fully qualified names (FQNs) and checks them against the :class:`SemanticsManager`
   to determine if they are currently supported by the transpiler.



Classes
-------

.. autoapisummary::

   ml_switcheroo.analysis.audit.CoverageScanner


Module Contents
---------------

.. py:class:: CoverageScanner(semantics: ml_switcheroo.semantics.manager.SemanticsManager, allowed_roots: Set[str])

   Bases: :py:obj:`libcst.CSTVisitor`


   Scans a file to identify API calls and checks if they exist in the Semantics Manager.

   It tracks import aliases to correctly resolve calls like `jnp.sum` back to
   `jax.numpy.sum` before querying the knowledge base.


   .. py:attribute:: results
      :type:  Dict[str, Tuple[bool, str]]

      A dictionary mapping Fully Qualified Names (FQN)
      to a tuple of `(is_supported, framework_key)`.


   .. py:attribute:: semantics


   .. py:attribute:: allowed_roots


   .. py:method:: visit_Import(node: libcst.Import) -> None

      Visits `import ...` statements to populate the alias map.

      :param node: The CST import node.



   .. py:method:: visit_ImportFrom(node: libcst.ImportFrom) -> None

      Visits `from ... import ...` statements to populate the alias map.

      :param node: The CST import-from node.



   .. py:method:: visit_Call(node: libcst.Call) -> None

      Visits function call nodes to check the invoked function.

      :param node: The CST call node.



   .. py:method:: visit_Attribute(node: libcst.Attribute) -> None

      Visits attributes to check for framework constants.

      This allows detecting usage like `torch.float32` which are not calls
      but still require support. Checks are idempotent via the results dictionary.

      :param node: The CST attribute node.



