ml_switcheroo.semantics.manager
===============================

.. py:module:: ml_switcheroo.semantics.manager

.. autoapi-nested-parse::

   SemanticsManager for Knowledge Base Loading and Updating.

   This module acts as the central database and coordinator for the Semantic
   Knowledge Base. It delegates file loading and registry introspection to helper
   modules, serving as the primary API for querying operation definitions.

   Core Responsibilities:
   1.  **State Management**: Holds the merged view of operations, traits, and aliases.
   2.  **Querying**: Resolves Abstract Operations to Framework-Specific Variants.
   3.  **Coordination**: Triggers file loaders and code hydrators on initialization.



Classes
-------

.. autoapisummary::

   ml_switcheroo.semantics.manager.SemanticsManager


Module Contents
---------------

.. py:class:: SemanticsManager

   Central database for semantic mappings and configuration.

   It aggregates data from sources:
   1.  **File System**: JSON Specs (`semantics/`) and Overlays (`snapshots/`).
   2.  **Code Registry**: Python classes (`FrameworkAdapter`, `Plugin`).


   .. py:attribute:: data
      :type:  Dict[str, Dict]


   .. py:attribute:: framework_configs
      :type:  Dict[str, Dict]


   .. py:attribute:: test_templates
      :type:  Dict[str, Dict]


   .. py:attribute:: known_magic_args
      :type:  Set[str]


   .. py:attribute:: patterns
      :type:  List[ml_switcheroo.semantics.schema.PatternDef]
      :value: []



   .. py:method:: get_import_map(target_fw: str) -> Dict[str, Tuple[str, Optional[str], Optional[str]]]

      Generates the import mapping for the ImportFixer based on Tier linking.

      :param target_fw: The framework being targeted.

      :returns: Dict mapping source import paths to (root, sub, alias) tuples.



   .. py:method:: resolve_variant(abstract_id: str, target_fw: str) -> Optional[Dict[str, Any]]

      Resolves the implementation of an abstract operation.



   .. py:method:: is_verified(abstract_id: str) -> bool

      Returns True if the operation is marked verified (or untracked).



   .. py:method:: get_definition_by_id(abstract_id: str) -> Optional[Dict[str, Any]]

      Direct dictionary access.



   .. py:method:: get_definition(api_name: str) -> Optional[Tuple[str, Dict]]

      Reverse lookup from concrete API string or Abstract ID fallback.



   .. py:method:: get_known_apis() -> Dict[str, Dict]

      Returns full knowledge graph.



   .. py:method:: get_framework_config(framework: str) -> Dict[str, Any]

      Returns definition of framework traits.



   .. py:method:: get_test_template(framework: str) -> Optional[Dict[str, str]]

      Returns testing codegen templates.



   .. py:method:: get_framework_aliases() -> Dict[str, Tuple[str, str]]

      Returns a map of {fw: (module, alias)}.



   .. py:method:: get_all_rng_methods() -> Set[str]

      Returns aggregate list of random seeding methods.



   .. py:method:: get_patterns() -> List[ml_switcheroo.semantics.schema.PatternDef]

      Returns the list of loaded fusion patterns.



   .. py:method:: load_validation_report(report_path: pathlib.Path) -> None

      Loads a CI verification report to gate unavailable operations.



   .. py:method:: update_definition(abstract_id: str, new_data: Dict[str, Any]) -> None

      Updates an operation definition in memory and persists to disk.



