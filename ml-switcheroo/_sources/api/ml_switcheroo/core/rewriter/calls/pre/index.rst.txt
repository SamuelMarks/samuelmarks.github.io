ml_switcheroo.core.rewriter.calls.pre
=====================================

.. py:module:: ml_switcheroo.core.rewriter.calls.pre

.. autoapi-nested-parse::

   Pre-processing Phase for Call Rewriting.

   Handles logic that must occur before the core semantic lookup:
   1.  **Functional Unwrapping**: Converting `apply` patterns if converting from functional frameworks.
   2.  **Plugin Claims**: Heuristic execution of plugins (like in-place unrolling).
   3.  **Lifecycle Management**: Stripping methods like `.cuda()` or `.eval()`.
   4.  **Stateful Calls**: Rewriting calls that require state injection.
   5.  **Implicit Resolution**: Guessing API paths for method calls on objects.



Functions
---------

.. autoapisummary::

   ml_switcheroo.core.rewriter.calls.pre.handle_pre_checks
   ml_switcheroo.core.rewriter.calls.pre.resolve_implicit_method


Module Contents
---------------

.. py:function:: handle_pre_checks(rewriter: Any, original: libcst.Call, updated: libcst.Call, func_name: Optional[str]) -> Tuple[bool, libcst.CSTNode]

   Executes pre-lookup checks and transformations.

   :returns:     - `handled (bool)`: If True, the transformation is complete and should return early.
                 - `node (cst.CSTNode)`: The result node (or updated node if not handled).
   :rtype: Tuple[bool, cst.CSTNode]


.. py:function:: resolve_implicit_method(rewriter: Any, original: libcst.Call, func_name: Optional[str]) -> Optional[str]

   Attempts to resolve method calls on objects to full API paths.
   E.g. `x.float()` -> `torch.Tensor.float`.

   This function attempts to find a match in the Semantic Knowledge Base
   by checking implicit root classes (e.g. `torch.Tensor`) defined in source traits.

   :param rewriter: The calling rewriter.
   :param original: The original CST node.
   :param func_name: The currently resolved name (usually None or the failed name).

   :returns: Resolved fully qualified name, or None if no match found.
   :rtype: str


