ml_switcheroo.discovery.scaffolder
==================================

.. py:module:: ml_switcheroo.discovery.scaffolder

.. autoapi-nested-parse::

   Scaffolding Tool for Knowledge Base Discovery.

   This module provides the `Scaffolder` class, which inspects installed
   libraries (Torch, JAX, etc.) and aligns them against the Specification-Guided
   Knowledge Base.

   It prioritizes matching discovered APIs against ingested Specs (ONNX, Array API)
   before falling back to structural heuristics provided by Framework Adapters.

   Updates for Distributed Semantics:
   - Writes Abstract Operation Definitions (Specs) to `semantics/*.json` (Hub).
   - Writes Implementation Details (Variants) to `snapshots/*.json` (Spokes).



Classes
-------

.. autoapisummary::

   ml_switcheroo.discovery.scaffolder.Scaffolder


Module Contents
---------------

.. py:class:: Scaffolder(semantics: Optional[ml_switcheroo.semantics.manager.SemanticsManager] = None, similarity_threshold: float = 0.8, arity_penalty: float = 0.3)

   Automated discovery tool that aligns framework APIs.

   .. attribute:: inspector

      Tool to extract function signatures.

      :type: ApiInspector

   .. attribute:: console

      Rich console for output.

      :type: Console

   .. attribute:: semantics

      The knowledge base manager.

      :type: SemanticsManager

   .. attribute:: similarity_threshold

      Cutoff for fuzzy matching (0.0 - 1.0).

      :type: float

   .. attribute:: arity_penalty

      Penalty subtracted from similarity score for mismatched arity.

      :type: float

   .. attribute:: _cached_heuristics

      Compiled regexes for categorization.

      :type: Dict[str, List[re.Pattern]]


   .. py:attribute:: inspector


   .. py:attribute:: console


   .. py:attribute:: semantics


   .. py:attribute:: similarity_threshold
      :value: 0.8



   .. py:attribute:: arity_penalty
      :value: 0.3



   .. py:attribute:: staged_specs
      :type:  Dict[str, Dict[str, Any]]


   .. py:attribute:: staged_mappings
      :type:  Dict[str, Dict[str, Any]]


   .. py:method:: scaffold(frameworks: List[str], root_dir: Optional[pathlib.Path] = None)

      Main entry point. Scans frameworks and builds/updates JSON mappings.

      :param frameworks: List of package names (e.g. ['torch', 'jax']).
      :param root_dir: Root directory of the Knowledge Base (Hub & Spokes).
                       If provided, 'semantics/' and 'snapshots/' subdirs are used relative to this.
                       If None, defaults to package location.



