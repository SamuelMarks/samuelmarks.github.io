ml_switcheroo.core.import_fixer
===============================

.. py:module:: ml_switcheroo.core.import_fixer

.. autoapi-nested-parse::

   Import Management Transformer for ml-switcheroo.

   This module is responsible for reading the AST's import references and remapping them
   based on the data provided by SemanticsManager (Feature 024).
   It also handles collapsing fully qualified paths (e.g. `torch.nn.Linear`) into
   aliases (e.g. `nn.Linear`) based on content injection logic.



Classes
-------

.. autoapisummary::

   ml_switcheroo.core.import_fixer.ImportFixer


Module Contents
---------------

.. py:class:: ImportFixer(source_fws: Union[str, List[str]], target_fw: str, submodule_map: Dict[str, Tuple[str, Optional[str], Optional[str]]], alias_map: Optional[Dict[str, Tuple[str, str]]] = None, preserve_source: bool = False)

   Bases: :py:obj:`libcst.CSTTransformer`


   LibCST Transformer that manages top-level imports and path shortening.


   .. py:attribute:: target_fw


   .. py:attribute:: submodule_map


   .. py:attribute:: alias_map


   .. py:attribute:: preserve_source
      :value: False



   .. py:method:: leave_Attribute(original_node: libcst.Attribute, updated_node: libcst.Attribute) -> libcst.BaseExpression

      Collapses fully qualified paths to aliases if configured.
      e.g. `torch.nn.Linear` -> `nn.Linear` if `torch.nn` -> `nn` alias exists for this target.



   .. py:method:: leave_Import(original_node: libcst.Import, updated_node: libcst.Import) -> Union[libcst.Import, libcst.RemovalSentinel]

      Inspects ``import ...`` statements.
      Checks aliases against submodule_map or prunes matches to source_fw.



   .. py:method:: leave_ImportFrom(original_node: libcst.ImportFrom, updated_node: libcst.ImportFrom) -> Union[libcst.ImportFrom, libcst.RemovalSentinel]

      Inspects ``from ... import ...`` statements.
      Checks module+name against submodule_map.



   .. py:method:: leave_Module(original_node: libcst.Module, updated_node: libcst.Module) -> libcst.Module

      Post-process module to inject imports intelligently.



